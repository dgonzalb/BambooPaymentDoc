<!doctype html>
<html lang="es" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">


<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">




<link rel="icon" type="image/x-icon" href="../../../../assets/bamboo.ico" sizes="32x32">
<title>Token de Uso Recurrente | Bamboo Payment</title><meta property="og:title" content="Token de Uso Recurrente" />
<meta property="og:description" content="A diferencia de los [Usuarios Anónimos]({{&lt; ref Anonymous-users.md&gt;}}), estos usuarios están registrados en el sitio web por lo que puede identificarlos y la información de su tarjeta puede ser asociada para realizar otras compras sin tener que ingresar nuevamente la información.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/es/docs/purchase-workflow/customer-types/registered-users.html" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-07-17T07:28:16-05:00" />
<meta property="article:modified_time" content="2024-08-26T22:51:46-03:00" /><meta property="og:site_name" content="Bamboo Payment" />
<meta itemprop="name" content="Token de Uso Recurrente">
<meta itemprop="description" content="A diferencia de los [Usuarios Anónimos]({{&lt; ref Anonymous-users.md&gt;}}), estos usuarios están registrados en el sitio web por lo que puede identificarlos y la información de su tarjeta puede ser asociada para realizar otras compras sin tener que ingresar nuevamente la información.
"><meta itemprop="datePublished" content="2023-07-17T07:28:16-05:00" />
<meta itemprop="dateModified" content="2024-08-26T22:51:46-03:00" />
<meta itemprop="wordCount" content="2384">
<meta itemprop="keywords" content="subtopic," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Token de Uso Recurrente"/>
<meta name="twitter:description" content="A diferencia de los [Usuarios Anónimos]({{&lt; ref Anonymous-users.md&gt;}}), estos usuarios están registrados en el sitio web por lo que puede identificarlos y la información de su tarjeta puede ser asociada para realizar otras compras sin tener que ingresar nuevamente la información.
"/>

<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>



<link rel="preload" href="../../../../scss/main.scss" as="style">
<link href="../../../../scss/main.scss" rel="stylesheet" integrity="">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&amp;display=swap" rel="stylesheet">


<script defer language="javascript" type="text/javascript"  src="../../../../js/add-on.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>


  </head>
  <body class="td-page">
    <header>
       
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <a class="navbar-brand" href="../../../../es/">
        <span class="navbar-logo"><img src="../../../../assets/BambooPayment.svg" style="height: 36px;"></span>
    </a>
    <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="../../../../es/docs.html" ><span class="active">Payins</span>
					<div class="content-bar-menu2"></div>
				</a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="../../../../es/payouts.html" ><span>Payouts</span>
					<div class="content-bar-menu2"></div>
				</a>
			</li>
			
            
            
            

            
            
            <li class="nav-item dropdown d-none d-lg-block">
                

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	<div class="content-bar-menu"></div>
	Español
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="../../../../en/docs/purchase-workflow/customer-types/registered-users.html">English</a>
	
</div>
            </li>
            
        </ul>
    </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="input-wrapper">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="Buscar …"
  aria-label="Buscar …"
  autocomplete="off"
  
  data-offline-search-index-json-src="../../../../offline-search-index.55f7529219cef72ff6b6ea4efa22ad63233776544f48437ece22b067c6cb7c45bb12535c46811eb1e2dd54d0be11a995abf7837bbeea60e9cabafeaf4ba40bbc.json"
  data-offline-search-base-href="../../../../"
>

<svg
      xmlns="http://www.w3.org/2000/svg"
      class="input-icon"
      viewBox="0 0 20 20"
      fill="currentColor"
   >
      <path
         fill-rule="evenodd"
         d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
         clip-rule="evenodd"
      />
   </svg>

</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
      <img src="../../../../assets/burgermenu.png" height ="20" width="20" style="margin-left: 40px;"/>
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    <div class="nav-item dropdown d-block d-lg-none">
      

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	<div class="content-bar-menu"></div>
	Español
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="../../../../en/docs/purchase-workflow/customer-types/registered-users.html">English</a>
	
</div>
    </div>
    
    








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs.html" href="../../../../es/docs.html" class="align-left pl-0 pr-2  td-sidebar-link td-sidebar-link__section ">Guía de Payins</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocshtml">
      
      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs/getting-started.html" href="../../../../es/docs/getting-started.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Primeros pasos</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocsgetting-startedhtml">
      
      
      
      
      
      
        <a id="/es/docs/getting-started/concepts.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsgetting-startedconceptshtml" href="../../../../es/docs/getting-started/concepts.html">Conceptos</a>
      
      
      
      
      
        <a id="/es/docs/getting-started/data-types.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsgetting-starteddata-typeshtml" href="../../../../es/docs/getting-started/data-types.html">Tipos de datos</a>
      
      
      
      
      
        <a id="/es/docs/getting-started/payment-methods.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsgetting-startedpayment-methodshtml" href="../../../../es/docs/getting-started/payment-methods.html">Medios de pago</a>
      
      
      
      
      
        <a id="/es/docs/getting-started/test-our-services.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsgetting-startedtest-our-serviceshtml" href="../../../../es/docs/getting-started/test-our-services.html">Probar la API</a>
      
      
      
      
      
        <a id="/es/docs/getting-started/error-codes.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsgetting-startederror-codeshtml" href="../../../../es/docs/getting-started/error-codes.html">Códigos de error</a>
      
      
      
      
      
        <a id="/es/docs/getting-started/change-log.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsgetting-startedchange-loghtml" href="../../../../es/docs/getting-started/change-log.html">Cambios en la versión</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs/purchase-workflow.html" href="../../../../es/docs/purchase-workflow.html" class="align-left pl-0 pr-2  td-sidebar-link td-sidebar-link__section ">API de compras</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspurchase-workflowhtml">
      
      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/purchase-workflow/customer-types.html" href="../../../../es/docs/purchase-workflow/customer-types.html" class="align-left pl-0 pr-2 active  td-sidebar-link td-sidebar-link__page ">Tokenización</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspurchase-workflowcustomer-typeshtml">
      
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/customer-types/anonymous-users.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowcustomer-typesanonymous-usershtml" href="../../../../es/docs/purchase-workflow/customer-types/anonymous-users.html">Token de Uso Único</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/customer-types/registered-users.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  active sub-section-child-topic" id="m-esdocspurchase-workflowcustomer-typesregistered-usershtml" href="../../../../es/docs/purchase-workflow/customer-types/registered-users.html">Token de Uso Recurrente</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/customer-types/direct-tokenization.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowcustomer-typesdirect-tokenizationhtml" href="../../../../es/docs/purchase-workflow/customer-types/direct-tokenization.html">Tokenización PCI</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/customer-types/network_tokens.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowcustomer-typesnetwork_tokenshtml" href="../../../../es/docs/purchase-workflow/customer-types/network_tokens.html">Tokens de Red</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/purchase-workflow/purchases.html" href="../../../../es/docs/purchase-workflow/purchases.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Compras</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspurchase-workflowpurchaseshtml">
      
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/purchases/purchase_v3.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowpurchasespurchase_v3html" href="../../../../es/docs/purchase-workflow/purchases/purchase_v3.html">Crear una compra</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/purchases/card_validation.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowpurchasescard_validationhtml" href="../../../../es/docs/purchase-workflow/purchases/card_validation.html">Get de la Compra</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/purchases/get-purchase.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowpurchasesget-purchasehtml" href="../../../../es/docs/purchase-workflow/purchases/get-purchase.html">Get de la Compra</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/purchases/card_operations.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowpurchasescard_operationshtml" href="../../../../es/docs/purchase-workflow/purchases/card_operations.html">Captura y Cancel</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/purchases/purchase-preview.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowpurchasespurchase-previewhtml" href="../../../../es/docs/purchase-workflow/purchases/purchase-preview.html">Preview de la compra</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/purchases/3d_secure.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspurchase-workflowpurchases3d_securehtml" href="../../../../es/docs/purchase-workflow/purchases/3d_secure.html">3DS Pass-through</a>
      
      
    </li>
  </ul>
  

      
      
      
      
      
        <a id="/es/docs/purchase-workflow/refunds.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocspurchase-workflowrefundshtml" href="../../../../es/docs/purchase-workflow/refunds.html">Reembolsos</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/antifraud.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocspurchase-workflowantifraudhtml" href="../../../../es/docs/purchase-workflow/antifraud.html">Antifraude</a>
      
      
      
      
      
        <a id="/es/docs/purchase-workflow/notification-webhooks.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocspurchase-workflownotification-webhookshtml" href="../../../../es/docs/purchase-workflow/notification-webhooks.html">Webhook</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs/forms.html" href="../../../../es/docs/forms.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Formulario de Tokenización</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocsformshtml">
      
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs/merchant-balances.html" href="../../../../es/docs/merchant-balances.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">API de saldos</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocsmerchant-balanceshtml">
      
      
      
      
      
      
        <a id="/es/docs/merchant-balances/request-withdrawal.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsmerchant-balancesrequest-withdrawalhtml" href="../../../../es/docs/merchant-balances/request-withdrawal.html">Solicitar un Retiro</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs/reporting.html" href="../../../../es/docs/reporting.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">API de Reportes</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocsreportinghtml">
      
      
      
      
      
      
        <a id="/es/docs/reporting/transactions-report.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsreportingtransactions-reporthtml" href="../../../../es/docs/reporting/transactions-report.html">API de Transacciones</a>
      
      
      
      
      
        <a id="/es/docs/reporting/statement-report.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsreportingstatement-reporthtml" href="../../../../es/docs/reporting/statement-report.html">API de Movimientos Financieros</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs/payment-methods.html" href="../../../../es/docs/payment-methods.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Países y medios de pago</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodshtml">
      
      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/argentina.html" href="../../../../es/docs/payment-methods/argentina.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Argentina</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodsargentinahtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/argentina/ar-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsargentinaar-cardshtml" href="../../../../es/docs/payment-methods/argentina/ar-cards.html">Tarjetas crédito y débito</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/argentina/ar-apm-cash.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsargentinaar-apm-cashhtml" href="../../../../es/docs/payment-methods/argentina/ar-apm-cash.html">Efectivo</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/argentina/ar-apm-banktransfer.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsargentinaar-apm-banktransferhtml" href="../../../../es/docs/payment-methods/argentina/ar-apm-banktransfer.html">Transferencias bancarias</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/brazil.html" href="../../../../es/docs/payment-methods/brazil.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Brasil</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodsbrazilhtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/brazil/br-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsbrazilbr-cardshtml" href="../../../../es/docs/payment-methods/brazil/br-cards.html">Tarjetas crédito</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/brazil/br-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsbrazilbr-apmhtml" href="../../../../es/docs/payment-methods/brazil/br-apm.html">Medios alternativos de pago</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/central-america.html" href="../../../../es/docs/payment-methods/central-america.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">América Central</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodscentral-americahtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/central-america/cam-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodscentral-americacam-apmhtml" href="../../../../es/docs/payment-methods/central-america/cam-apm.html">Pagos en Efectivo</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/chile.html" href="../../../../es/docs/payment-methods/chile.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Chile</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodschilehtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/chile/cl-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodschilecl-cardshtml" href="../../../../es/docs/payment-methods/chile/cl-cards.html">Tarjetas crédito y débito</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/chile/cl-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodschilecl-apmhtml" href="../../../../es/docs/payment-methods/chile/cl-apm.html">Medios alternativos de pago</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/colombia.html" href="../../../../es/docs/payment-methods/colombia.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Colombia</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodscolombiahtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/colombia/co-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodscolombiaco-cardshtml" href="../../../../es/docs/payment-methods/colombia/co-cards.html">Tarjetas crédito y débito</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/colombia/co-apm-banktransfer.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodscolombiaco-apm-banktransferhtml" href="../../../../es/docs/payment-methods/colombia/co-apm-banktransfer.html">Transferencias bancarias - PSE</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/colombia/co-apm-cash.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodscolombiaco-apm-cashhtml" href="../../../../es/docs/payment-methods/colombia/co-apm-cash.html">Efectivo</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/colombia/co-apm-wallet.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodscolombiaco-apm-wallethtml" href="../../../../es/docs/payment-methods/colombia/co-apm-wallet.html">Nequi</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/ecuador.html" href="../../../../es/docs/payment-methods/ecuador.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Ecuador</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodsecuadorhtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/ecuador/ec-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsecuadorec-apmhtml" href="../../../../es/docs/payment-methods/ecuador/ec-apm.html">Medios alternativos de pago</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/mexico.html" href="../../../../es/docs/payment-methods/mexico.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">México</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodsmexicohtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/mexico/mx-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsmexicomx-cardshtml" href="../../../../es/docs/payment-methods/mexico/mx-cards.html">Tarjetas crédito y débito</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/mexico/mx-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsmexicomx-apmhtml" href="../../../../es/docs/payment-methods/mexico/mx-apm.html">Medios alternativos de pago</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/paraguay.html" href="../../../../es/docs/payment-methods/paraguay.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Paraguay</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodsparaguayhtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/paraguay/py-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsparaguaypy-cardshtml" href="../../../../es/docs/payment-methods/paraguay/py-cards.html">Tarjetas crédito y débito</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/paraguay/py-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsparaguaypy-apmhtml" href="../../../../es/docs/payment-methods/paraguay/py-apm.html">Medios alternativos de pago</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/peru.html" href="../../../../es/docs/payment-methods/peru.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Perú</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodsperuhtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/peru/pe-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsperupe-cardshtml" href="../../../../es/docs/payment-methods/peru/pe-cards.html">Tarjetas crédito y débito</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/peru/pe-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsperupe-apmhtml" href="../../../../es/docs/payment-methods/peru/pe-apm.html">Medios alternativos de pago</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/payment-methods/uruguay.html" href="../../../../es/docs/payment-methods/uruguay.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Uruguay</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspayment-methodsuruguayhtml">
      
      
      
      
      
      
        <a id="/es/docs/payment-methods/uruguay/uy-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsuruguayuy-cardshtml" href="../../../../es/docs/payment-methods/uruguay/uy-cards.html">Tarjetas crédito y débito</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/uruguay/uy-loyaltyplans.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsuruguayuy-loyaltyplanshtml" href="../../../../es/docs/payment-methods/uruguay/uy-loyaltyplans.html">Planes de Fidelización</a>
      
      
      
      
      
        <a id="/es/docs/payment-methods/uruguay/uy-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspayment-methodsuruguayuy-apmhtml" href="../../../../es/docs/payment-methods/uruguay/uy-apm.html">Medios alternativos de pago</a>
      
      
    </li>
  </ul>
  

      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs/plugins.html" href="../../../../es/docs/plugins.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Plug-ins</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspluginshtml">
      
      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/plugins/vtex.html" href="../../../../es/docs/plugins/vtex.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Conector VTEX</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocspluginsvtexhtml">
      
      
      
      
      
      
        <a id="/es/docs/plugins/vtex/vtex_setup.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspluginsvtexvtex_setuphtml" href="../../../../es/docs/plugins/vtex/vtex_setup.html">Guía de Integración</a>
      
      
      
      
      
        <a id="/es/docs/plugins/vtex/vtex_payment_flow.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspluginsvtexvtex_payment_flowhtml" href="../../../../es/docs/plugins/vtex/vtex_payment_flow.html">Flujo de Pago</a>
      
      
      
      
      
        <a id="/es/docs/plugins/vtex/vtex_admin.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocspluginsvtexvtex_adminhtml" href="../../../../es/docs/plugins/vtex/vtex_admin.html">Panel de Control</a>
      
      
    </li>
  </ul>
  

      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/es/docs/versions.html" href="../../../../es/docs/versions.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Legacy</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocsversionshtml">
      
      
      
      
      
      
        <a id="/es/docs/versions/purchase-api-v2/purchase-operations.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-esdocsversionspurchase-api-v2purchase-operationshtml" href="../../../../es/docs/versions/purchase-api-v2/purchase-operations.html">Compras (Legacy)</a>
      
      
      
      
      
        <a id="/es/docs/versions/purchase-api-v2/redirect-purchase.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocsversionspurchase-api-v2redirect-purchasehtml" href="../../../../es/docs/versions/purchase-api-v2/redirect-purchase.html">Compra Redirect</a>
      
      
      
      
      
        <a id="/es/docs/versions/purchase-api-v2/direct-purchase.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocsversionspurchase-api-v2direct-purchasehtml" href="../../../../es/docs/versions/purchase-api-v2/direct-purchase.html">Compra Directa</a>
      
      
      
      
      
        <a id="/es/docs/versions/purchase-api-v2/refunds-and-voids.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocsversionspurchase-api-v2refunds-and-voidshtml" href="../../../../es/docs/versions/purchase-api-v2/refunds-and-voids.html">Reembolsos y anulaciones</a>
      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/es/docs/versions/forms.html" href="../../../../es/docs/versions/forms.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Formularios (Legacy)</a>
  </li>
  <ul class="side-main">
    <li class="" id="esdocsversionsformshtml">
      
      
      
      
      
      
        <a id="/es/docs/versions/forms/checkout-form.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocsversionsformscheckout-formhtml" href="../../../../es/docs/versions/forms/checkout-form.html">Checkout</a>
      
      
      
      
      
        <a id="/es/docs/versions/forms/embedded-checkout-form.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-esdocsversionsformsembedded-checkout-formhtml" href="../../../../es/docs/versions/forms/embedded-checkout-form.html">Checkout embebido</a>
      
      
    </li>
  </ul>
  

      
      
    </li>
  </ul>
   </ul> 

      
      
    </li>
  </ul>
   </ul> 

  </nav>
</div>


<script>
  $('.td-sidebar-nav').scrollTop(localStorage.getItem("currentPosition"))
  var currentPosition = 0;
  $(".td-sidebar-nav" ).scroll(function() {
    currentPosition = $('.td-sidebar-nav').scrollTop()
    localStorage.setItem("currentPosition",currentPosition);
  });
  
</script>


          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            









<p> </p>


<nav id="TableOfContents">
  <ul>
    <li><a href="#create-a-customer">Crear un Cliente</a>
      <ul>
        <li><a href="#request-parameters">Parámetros del Request</a></li>
        <li><a href="#response-parameters">Parámetros del Response</a></li>
        <li><a href="#customer-operations">Operaciones sobre los clientes</a></li>
      </ul>
    </li>
    <li><a href="#capture-the-card-data">Capturar la información de la tarjeta</a>
      <ul>
        <li><a href="#invoking-the-card-enrollment">Invocando el formulario de inscripción de tarjeta</a></li>
        <li><a href="#using-direct-tokenization">Utilizando la Tokenización Directa</a></li>
      </ul>
    </li>
    <li><a href="#using-direct-tokenization">Crear una Compra Básica</a></li>
    <li><a href="#recurring-purchases-in-one-click">Compras recurrentes en un clic</a></li>
    <li><a href="#verification-code-request-flow">Flujo de Solicitud de Código de Verificación</a></li>
    <li><a href="#notification-alternative">Alternativa de Notificación</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		













<li class="breadcrumb-item" >
	<a href="../../../../es/docs.html">Guía de Payins</a>
</li>




<li class="breadcrumb-item" >
	<a href="../../../../es/docs/purchase-workflow.html">API de compras</a>
</li>




<li class="breadcrumb-item" >
	<a href="../../../../es/docs/purchase-workflow/customer-types.html">Tokenización</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="../../../../es/docs/purchase-workflow/customer-types/registered-users.html">Token de Uso Recurrente</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Token de Uso Recurrente</h1>
    <div class="lead">A diferencia de los <a href="../../../../es/docs/purchase-workflow/customer-types/anonymous-users.html">Usuarios Anónimos</a>, estos usuarios están registrados en el sitio web por lo que puede identificarlos y la información de su tarjeta puede ser asociada para realizar otras compras sin tener que ingresar nuevamente la información.</div>
	       
	<p>El cliente recibe un <em>CommerceToken</em> después de registrar su tarjeta, la cual puede ser utilizada para futuras transacciones. A continuación, se encuentran los pasos para comprar como un usuario registrado en el sitio web.</p>
<h2 id="create-a-customer">Crear un Cliente</h2>
<p>El primer paso es crear el cliente en Bamboo Payment. Para esto, debe invocar un request <strong>POST</strong> a las siguientes URL de acuerdo con sus necesidades.</p>
<ul>
<li><strong>Producción</strong>: <code>https://api.bamboopayment.com/v1/api/customer</code></li>
<li><strong>Stage</strong>: <code>https://api.stage.bamboopayment.com/v1/api/customer</code></li>
</ul>
<h3 id="request-parameters">Parámetros del Request</h3>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th style="text-align:center">¿Obligatorio?</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Email</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Dirección de correo electrónico del cliente.</td>
</tr>
<tr>
<td><code>FirstName</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Nombre del cliente.</td>
</tr>
<tr>
<td><code>LastName</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Apellido del cliente.</td>
</tr>
<tr>
<td><code>DocumentTypeId</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Tipo de documento del cliente. Encuentre los posibles valores en la tabla de Tipos de Documento de acuerdo con el <a href="../../../../es/docs/payment-methods.html">país</a>.</td>
</tr>
<tr>
<td><code>DocNumber</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Número de documento del cliente.</td>
</tr>
<tr>
<td><code>Owner</code></td>
<td><code>string</code></td>
<td style="text-align:center">No</td>
<td>Determina si el usuario es anónimo o si el comercio, o nosotros, lo registró.<br>Los posibles valores son:<ul style="margin-bottom: initial;"><li><em>Our</em></li><li><em>Commerce</em>. Este es el valor por defecto.</li><li><em>Anonymous</em></li></ul></td>
</tr>
<tr>
<td><code>PhoneNumber</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Número de teléfono de contacto del cliente.</td>
</tr>
<tr>
<td><code>BillingAddress</code></td>
<td><code>object</code></td>
<td style="text-align:center">Sí</td>
<td>Este parámetro es la dirección de facturación del cliente.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>AddressID</code></td>
<td><code>integer</code></td>
<td style="text-align:center">Sí</td>
<td>Identificador de la dirección.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>AddressType</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Tipo de dirección.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>Country</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>País de la dirección.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>State</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Estado de la dirección.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>City</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Ciudad de la dirección.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>AddressDetail</code></td>
<td><code>string</code></td>
<td style="text-align:center">Sí</td>
<td>Este parámetro corresponde a la información adicional de la dirección, como calle, número, etc.</td>
</tr>
</tbody>
</table>
<h4 id="request-example">Ejemplo del Request</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;kristeldyoder@teleworm.us&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;FirstName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Kristel&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;LastName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Yoder&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;DocNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;31130749&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;DocumentTypeId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commerce&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;PhoneNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;093000000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;BillingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;AddressType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Country&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Uruguay&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;State&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;City&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;AddressDetail&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;100&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="response-parameters">Parámetros del Response</h3>
<p>El objeto de respuesta retorna la información del cliente recién creado o el error que se haya podido producir. En el parámetro <code>Response.CustomerId</code> se encuentra el identificador de cliente generado por la API para poder consultarlo o actualizarlo.</p>
<p>Utilice los siguientes parámetros para realizar operaciones adicionales sobre los clientes:</p>
<ul>
<li><code>CaptureURL</code>: URL de captura de datos de la tarjeta. Abra esta URL en un iframe para iniciar la captura de datos sensibles. Para más información, consulte <a href="#invoking-the-card-enrollment">Invocando el formulario de inscripción de tarjeta</a>.</li>
<li><code>UniqueID</code>: Identificador único temporal utilizado para registrar métodos de pago externos. Cada vez que se solicita la información del Cliente, se obtiene un nuevo identificador. Para más información, consulte <a href="#invoking-the-card-enrollment">Invocando el formulario de inscripción de tarjeta</a>.</li>
<li><code>URL</code>: URL en la que se puede consultar la información de un cliente. Para más información, consulte <a href="#get-a-customer">Obtener un cliente</a>.</li>
</ul>
<h4 id="response-example">Ejemplo del Response</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Response&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;CustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">249205</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Created&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2023-08-22T11:26:53.343&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;CommerceCustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commerce&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;kristeldyoder@teleworm.us&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Enabled&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;ShippingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;BillingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;AddressId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">373151</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;AddressType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Country&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Uruguay&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;State&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;AddressDetail&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;100&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;PostalCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;City&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Plans&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;AdditionalData&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;PaymentProfiles&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;CaptureURL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://api.stage.bamboopayment.com/Capture/&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;UniqueID&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UI_b53cb8db-771e-4622-a5db-0e58e156f192&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;URL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://api.stage.bamboopayment.com/api/Customer/249205&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;FirstName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Kristel&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;LastName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Yoder&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;DocNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;31130749&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;DocumentTypeId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;PhoneNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;093000000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;ExternalValue&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Errors&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="customer-operations">Operaciones sobre los clientes</h3>
<p>Una vez haya creado un usuario, puede realizar operaciones para obtener o actualizar su información.</p>
<h4 id="get-a-customer">Obtener un cliente</h4>
<p>Se puede obtener la información del cliente usando su ID o su dirección de correo electrónico.</p>
<p>Para esto, debe invocar un request <strong>GET</strong> a las siguientes URL de acuerdo con sus necesidades.</p>
<ul>
<li><strong>Producción</strong>: <code>https://api.bamboopayment.com/v1/api/customer</code></li>
<li><strong>Stage</strong>: <code>https://api.stage.bamboopayment.com/v1/api/customer</code></li>
</ul>
<div id="shortTable"></div>
<table>
<thead>
<tr>
<th></th>
<th>Endpoint</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Obtener por el <em>Identificador del cliente</em></td>
<td><code>/{{customer-id}}</code></td>
<td></td>
</tr>
<tr>
<td>Obtener por el <em>correo electrónico del cliente</em></td>
<td><code>/GetCustomerByEmail?email={{EmailAddress}}</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>En la respuesta, se obtiene una lista con el mismo objeto retornado en la <a href="#response-example">creación del cliente</a>. Ejemplo:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Response&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;CustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">249205</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Created&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2023-08-22T14:26:53.343&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;CommerceCustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commerce&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;kristeldyoder@teleworm.us&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Enabled&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;ShippingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;BillingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;AddressId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">373151</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;AddressType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;Country&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Uruguay&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;State&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;AddressDetail&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;100&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;PostalCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;City&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Plans&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;AdditionalData&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;PaymentProfiles&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;CaptureURL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://api.stage.bamboopayment.com/Capture/&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;UniqueID&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UI_61109a7f-5414-4424-8654-18c30060cd2b&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;URL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://api.stage.bamboopayment.com/api/Customer/249205&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;FirstName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Kristel&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;LastName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Yoder&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;DocNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;31130749&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;DocumentTypeId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;PhoneNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;093000000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;ExternalValue&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Errors&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="update-a-customer">Actualizar un cliente</h4>
<p>Para actualizar la información de un cliente, debe invocar un request <strong>POST</strong> a las siguientes URL de acuerdo con sus necesidades.</p>
<ul>
<li><strong>Producción</strong>: <code>https://api.bamboopayment.com/v1/api/customer/{{{{customer-id}}}}/update</code></li>
<li><strong>Stage</strong>: <code>https://api.stage.bamboopayment.com/v1/api/customer/{{customer-id}}/update</code></li>
</ul>
<p>Donde <code>{{customer-id}}</code> es el id generado cuando se creó el usuario. En el cuerpo del request los <a href="#request-parameters">parámetros</a> que quiera actualizar.</p>
<p>En la respuesta, se obtiene el mismo objeto retornado en la <a href="#response-example">creación del cliente</a>.</p>
<h2 id="capture-the-card-data">Capturar la información de la tarjeta</h2>
<p>El siguiente paso es obtener el token de la tarjeta del cliente. Para esto, puede invocar el formulario de inscripción de tarjeta o utilizar la <a href="../../../../es/docs/purchase-workflow/customer-types/direct-tokenization.html">Tokenización Directa</a> si su comercio cumple con la normativa PCI.</p>


<div class="alert alert-info" role="alert">
</i><h4 class="alert-heading"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-info" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-circle-info fa-fw decorative"><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z" class=""></path></svg>
    Info</h4>
<p class="alert-text">Si utiliza el identificador del Medio alternativo, no requiere realizar este paso y debe incluir el <strong>PaymentMediaId</strong>.</p>
</div>

<h3 id="invoking-the-card-enrollment">Invocando el formulario de inscripción de tarjeta</h3>
<p>El siguiente diagrama de secuencia explica el flujo de inscripción de tarjetas.</p>
<p><img src="../../../../assets/CardEnrollmentFlow_es.png" alt="PrintScreen"></p>
<p><strong>Llamadas API durante el flujo:</strong></p>
<ul>
<li><strong>3</strong>  HTTP/GET (server to server): <code>{environment_api}/v1/api/customer/{customer-id}</code></li>
<li><strong>11</strong>  HTTP/GET (server to server): <code>{environment_api}/v1/api/customer/{customer-id}</code></li>
</ul>
<p>Con la información obtenida en el <a href="#create-a-customer">paso anterior</a>, puede invocar los métodos <strong>OpenIframeCustom</strong> o <strong>OpenIframeCustomWithPaymentMediaOptions</strong> (ver detalles más abajo) de la librería JavaScript <code>PWCheckout</code>, que gestionan la captura de datos de la tarjeta.</p>
<h4 id="openiframecustom">OpenIframeCustom</h4>
<p>El método <strong>OpenIframeCustom</strong> recibe dos parámetros:</p>
<ul>
<li><strong>URL:</strong> La URL especifica la dirección del iFrame donde los clientes introducen los datos de la Tarjeta.<br>La URL se crea concatenando los datos recibidos de la siguiente manera: <code>{CaptureURL}?key={publicKey}&amp;session_id={UniqueID}</code> donde <code>{CaptureURL}</code> representa la <a href="../../../../es/docs/getting-started/concepts.html#environment">URL base</a> + <code>/Capture</code>. Por ejemplo <code>https://api.stage.bamboopayment.com/v1/Capture</code>.<br>Puede encontrar esta información en el parámetro <code>CaptureURL</code> del <a href="#response-parameters">response</a>.</li>
<li><strong>UniqueID:</strong> un identificador para distinguir la sesión de captura de datos. Puede encontrar esta información en el parámetro <code>CaptureURL</code> del <a href="#response-parameters">response</a>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">script</span> <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">OpenIframeCustom</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">UniqueID</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/script&gt;</span>
</span></span></code></pre></div><h4 id="openiframecustomwithpaymentmediaoptions">OpenIframeCustomWithPaymentMediaOptions</h4>
<p>El método  <strong>OpenIframeCustomWithPaymentMediaOptions</strong> recibe cuatro parámetros:</p>
<ul>
<li><strong>URL:</strong> Igual que en <a href="#openiframecustom">OpenIframeCustom</a>.</li>
<li><strong>UniqueID:</strong> Igual que en <a href="#openiframecustom">OpenIframeCustom</a>.</li>
<li><strong>PaymentMediaid:</strong> Identificador del Medio de pago. Si se envía, el Formulario de Captura de Tarjeta sólo aceptará tarjetas de este medio de pago. <em>Este parámetro sólo aplica para Uruguay</em>.</li>
<li><strong>BankId:</strong> <a href="../../../../es/docs/payment-methods/uruguay.html#issuer-banks-table">Identificador del banco</a>. <em>Este parámetro sólo aplica para Uruguay</em>.</li>
</ul>
<p>Si se envían ambos parámetros, el Formulario de Captura de Tarjeta sólo aceptará tarjetas del Medio de pago y Banco especificados, pero son opcionales.</p>
<p>Ejemplos de llamadas al método <strong>OpenIframeCustomWithPaymentMediaOptions</strong>:</p>
<ol>
<li>Llamada con <code>PaymentMediaId</code> y <code>BankId</code> enviados:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">script</span> <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Iframe</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">OpenIframeCustomWithPaymentMediaOptions</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">UniqueID</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">paymentMediaId</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">bankId</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/script&gt;</span>
</span></span></code></pre></div><br>
<ol start="2">
<li>Llamada con <code>PaymentMediaId</code> y <code>BankId</code> vacíos:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">script</span> <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Iframe</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">OpenIframeCustomWithPaymentMediaOptions</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">UniqueID</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/script&gt;</span>
</span></span></code></pre></div><br>
<p>El cliente ingresa los datos de la tarjeta y, tras confirmar, la librería <strong>PWCheckout</strong> recibe la notificación de que la tarjeta se ha capturado correctamente.</p>
<p>La página del comercio puede suscribirse al evento <em>tokenCreated</em> que se disparará al recibir la notificación de que los datos de la tarjeta fueron capturados.</p>
<p>La página también puede configurar la propiedad <code>form_id</code> (utilizando el método <code>SetProperties</code>) para enviar el identificador del formulario en la página que será controlada por la librería <strong>PWCheckout</strong>. La librería enviará el formulario una vez capturada la información de la tarjeta.</p>
<p>En respuesta a la notificación recibida (por el evento JavaScript o por el envío del formulario), la página del comercio debe volver a solicitar la información actualizada del cliente realizando la siguiente llamada <code>HTTP/GET</code> (server to server): <code>{environment_api}/v1/api/customer/{customer-id}</code>.</p>
<p>El objeto <strong>Customer</strong> retornado contiene los <em>PaymentProfiles</em> del cliente. Estos objetos tienen información sobre los medios de pago asociados al cliente, donde en los campos <em>Token</em> y <em>CommerceToken</em> representan la tarjeta de pago.</p>
<p>Ejemplo de respuesta que incluye un <strong>PaymentProfile</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Response&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;CustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">53479</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Created&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2021-04-06T16:08:43.767&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;CommerceCustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commerce&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Email222222@mail.com&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Enabled&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;ShippingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;BillingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;AddressId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">51615</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;AddressType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;Country&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UY&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;State&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;AddressDetail&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;PostalCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;City&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;MONTEVIDEO&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Plans&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;AdditionalData&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;PaymentProfiles&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;PaymentProfileId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">55591</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;PaymentMediaId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Created&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2021-04-19T11:26:17.693&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;LastUpdate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Brand&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;MasterCard&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;CardOwner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;John Simpson&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Bin&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;IssuerBank&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Santander&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Installments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;CreditCard&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Token&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;OT__wZcNQkcZtnYWeHIgR2vgWUUliS3lR18E4jiYpVJ8SzQ_&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Expiration&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;202211&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Last4&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;0001&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Enabled&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;CaptureURL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://testapi.BambooPayment.com/v1/Capture/&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;UniqueID&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UI_263b2dde-b151-4f09-b8bf-c65883d2cb3b&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;URL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://testapi.BambooPayment.com/v1/api/Customer/53479&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;FirstName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;FistName 2222&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;LastName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;LastName 2222&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;DocNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;12345672&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;DocumentTypeId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;PhoneNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;24022330&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Errors&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="using-direct-tokenization">Utilizando la Tokenización Directa</h3>
<p>Como el usuario está registrado en su comercio, debe invocar el método para <a href="../../../../es/docs/purchase-workflow/customer-types/direct-tokenization.html#CT">crear el token para usuarios registrados</a>.</p>


<div class="alert alert-warning" role="alert">
</i><h4 class="alert-heading"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-info" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-circle-info fa-fw decorative"><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z" class=""></path></svg>
    Nota</h4>
<p class="alert-text">Debe mantener la información del <em>CommerceToken</em> privada porque representa una tarjeta capturada que cualquiera puede usar para múltiples transacciones.</p>
</div>

<h2 id="using-direct-tokenization">Crear una Compra Básica</h2>
<p>Debe enviar el token recién obtenido desde el navegador o la aplicación móvil al servidor de aplicaciones para crear la transacción de compra.</p>
<p>Desde el servidor, invoque el método <a href="../../../../es/docs/versions/purchase-api-v2/purchase-operations.html#create-a-purchase">Crear una Compra</a>, incluyendo el objeto <code>Purchase</code> con el token y los datos de la transacción adicionales.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;TrxToken&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;CT_kYv0qTHckRiZ4wjCz5NguZRuwFLSIrQc4jiYpVJ8SzQ_&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Order&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;17030613595101621fb&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Amount&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">123456</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Currency&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;USD&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Capture&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;TargetCountryISO&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;CL&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;PaymentMediaId&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">106</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><br>
<p>Los campos <strong>PaymentMediaId</strong> y <strong>TrxToken</strong>  son opcionales, pero es obligatorio enviar uno dependiendo del flujo que quiere utilizar.</p>
<ul>
<li>
<p><strong>PaymentMediaId</strong>: Identificador de medio de pago alternativo (transferencia, efectivo y procesamiento que requiere redirección del cliente). Puede obtener este identificador consultando la sección <a href="../../../../es/docs/payment-methods.html">Medios de pago por país</a>.</p>
</li>
<li>
<p><strong>TrxToken</strong>: Puede generar el token y transaccionar enviándolo en este campo.</p>
</li>
</ul>
<h2 id="recurring-purchases-in-one-click">Compras recurrentes en un clic</h2>
<p>Después de que los clientes se registren correctamente, algunas tarjetas permiten ciertas transacciones sin necesidad de un Código de Verificación (CVV), lo que permite una experiencia de usuario más ágil (pagos en un solo clic). En estos casos, las compras se pueden enviar directamente sin solicitar más información al cliente, como se explica en el punto anterior, <a href="#create-a-basic-purchase">Compra básica</a>.</p>
<p>Debe solicitar el Código de Verificación cada vez que realice transacciones en las que la tarjeta no permita esta función, ya que no podemos almacenarlo en nuestros servidores.</p>
<h2 id="verification-code-request-flow">Flujo de Solicitud de Código de Verificación</h2>
<p>Para las Tarjetas que requieren ingresar del Código de Verificación en todas las transacciones, hemos diseñado el siguiente flujo de trabajo:</p>
<p><img src="../../../../assets/VerificationCodeRequestFlow_es.png" alt="PrintScreen"></p>
<ol>
<li>
<p>El cliente, identificado correctamente en la web de Comercio, inicia el proceso de pago de una compra utilizando una tarjeta previamente registrada y asociada a su cuenta.</p>
</li>
<li>
<p>La página del Comercio envía los datos al web server para preparar la información enviada a Bamboo Payment.</p>
</li>
<li>
<p>El Web Server del comercio envía la compra a través de la API de Bamboo Payment, identificando el <em>CommerceToken</em> como el medio de pago que el cliente seleccionó.</p>
</li>
<li>
<p>Realizamos una serie de validaciones; en este caso, verificamos si el medio de pago elegido permite la ejecución de transacciones sin el Código de Verificación. El Medio de pago seleccionado no permite esta funcionalidad en este flujo, por lo que la transacción sólo podrá completarse una vez haya obtenido el Código de Verificación de la tarjeta.</p>
</li>
<li>
<p>Retornamos el objeto <code>Purchase</code> en estado <em>Pending</em> (pendiente) como respuesta, indicando que es necesaria alguna acción para completar el proceso. El objeto <code>Purchase</code> devuelto también contiene el objeto <code>CommerceAction</code> que describe los pasos necesarios que debe realizar el comercio.</p>
</li>
</ol>
<p><img src="../../../../assets/CVVRequestFlow.png" alt="PrintScreen"></p>
<p>El comercio debe almacenar la información de la compra pendiente (al menos el <code>PurchaseId</code> para futuras validaciones) y procesar la información del <code>CommerceAction</code> para determinar la acción requerida. Tenga en cuenta las siguientes propiedades en este escenario:</p>
<p><strong>ActionReason</strong>: Tiene el valor <code>VERIFICATION_CODE_NEED</code> ya que la compra requiere este Código de Verificación.</p>
<ul>
<li><strong>ActionType</strong>: Este campo tiene el valor <strong>2</strong> correspondiente a la acción <code>PWCapture</code>, que es una función del componente javascript <code>PWCheckout</code> que permite procesar este tipo de acciones.</li>
<li><strong>ActionURL</strong>: Este campo especifica la URL que debe enviar como parámetro al método <code>PWCapture</code> del componente <code>PWCheckout</code>.</li>
</ul>
<ol start="6">
<li>La página web del comercio debe mostrar el formulario de solicitud de Código de Verificación al cliente utilizando el método <code>PWCapture</code> de la siguiente forma:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PWCapture</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><br>
<p>Donde el valor del parámetro <code>url</code> corresponde al campo <code>ActionURL</code> del objeto <code>CommerceAction</code> recibido.</p>
<ol start="7">
<li>El cliente ve el iframe con el Formulario de Captura, que en este caso se presenta mostrando el número de tarjeta enmascarado (sólo los cuatro últimos dígitos) y un campo de texto para ingresar el Código de Verificación.</li>
</ol>
<p><img src="../../../../assets/CVVCaptureForm.png" alt="PrintScreen"></p>
<ol start="8">
<li>
<p>El cliente ingresa el Código de Verificación de la tarjeta utilizada para realizar la compra.</p>
</li>
<li>
<p>El código de verificación que ingresa el cliente se envía directamente a los servidores de Bamboo Payment, donde se utiliza para crear el mensaje de autorización.</p>
</li>
<li>
<p>Bamboo Payment envía el mensaje de autorización a la entidad adquirente correspondiente con los datos completos.</p>
</li>
<li>
<p>Bamboo Payment procesa la respuesta del adquirente y actualiza el estado de la compra de acuerdo con dicha respuesta.</p>
</li>
<li>
<p>Bamboo Payment genera una notificación al comercio, informando el objeto <strong>Purchase</strong> y de su estado final determinado por el proceso de autorización. La <strong>Purchase</strong> enviada es la misma previamente respondida en el paso 5, el comercio debe validar la información recibida (al menos que el <code>PurchaseId</code> coincide con el esperado). Esta notificación se envía al <a href="../../../../es/docs/purchase-workflow/notification-webhooks.html">servicio de <strong>WebHook</strong></a> que el comercio debe implementar para obtener las diferentes notificaciones generadas por Bamboo Payment.</p>
</li>
</ol>
<h2 id="notification-alternative">Alternativa de Notificación</h2>
<p>Además de la opción de recibir una notificación desde Bamboo Payment al finalizar el proceso de compra (paso 12 del flujo normal), se puede ejecutar un flujo alternativo para consultar explícitamente el resultado de la compra una vez detectado que el proceso pendiente ha finalizado (tras el paso 5).</p>
<p><img src="../../../../assets/VerificationCodeRequestFlow2_es.png" alt="PrintScreen"></p>
<p>Este flujo utiliza las funcionalidades implementadas en la librería JavaScript <strong>PWCheckout</strong> para informar de la finalización del proceso de compra pendiente.</p>
<p>A continuación se enumeran y se explican los pasos relacionados con este flujo; las etapas iniciales antes del paso 12 son las mismas que las descritas anteriormente.</p>
<ol start="12">
<li>
<p>Una vez finalizado el proceso pendiente, la librería <strong>PWCheckout</strong> recibe una notificación del estado del proceso.</p>
</li>
<li>
<p>La librería <strong>PWCheckout</strong> lanza el evento <code>notificationReceived</code> event. El comercio debe suscribirse previamente al evento a través del método <strong>Bind</strong> de la siguiente manera:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#000;font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Bind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;notificationReceived&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">NotificationHandler</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><br>
<p>El comercio debe implementar la función <strong>NotificationHandler</strong> (el nombre es sólo un ejemplo), que recibirá la información sobre el estado final del proceso.</p>
<p>Ejemplo de la función para el manejo de notificaciones:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">NotificationHandler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">notification</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">notification</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ProcessStatus</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic">//Proceso OK
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic">//Proceso con errores
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><br>
<p>El campo <code>ProcessStatus</code> de la notificación recibida determina el estado final del proceso. Los posibles valores son:</p>
<p><strong>OK</strong> (valor 1) - El proceso ha finalizado correctamente.</p>
<ul>
<li><strong>Pending</strong> (valor 2) - El proceso sigue pendiente.</li>
<li><strong>Error</strong> (valor 3) - El proceso finalizó con error.</li>
</ul>
<ol start="14">
<li>
<p>Después de que la página web reciba el evento <code>notificationReceived</code>, puede continuar con el flujo.</p>
</li>
<li>
<p>El comercio debe invocar una llamada GET desde el servidor web a la API de Compras de Bamboo Payment, consultando el <code>PurchaseId</code> almacenado previamente en el paso 5.</p>
</li>
</ol>
<p>Para esto, se realiza la llamada: HTTP/GET (server to server):</p>
<p><code>{environment_api}/v1/api/purchase/{purchase-id} </code></p>
<ol start="16">
<li>La respuesta de Bamboo Payment contiene el objeto <code>Purchase</code> con un estado distinto de <em>Pending</em> (dependiendo del resultado de la transacción), por lo que puede procesarse como una respuesta de compra normal.</li>
</ol>
<p>Para esto, se realiza la llamada: HTTP/POST (server to server):</p>
<p><code>{environment_api}/v1/api/purchase</code></p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">
<img src="https://s3.us-east-1.amazonaws.com/gateway.prod.bamboopayment.com/doc-online/footer-barra.png" alt="footer" style="max-width: 100%;padding-bottom: 20px;">
<br>
<div class="footerContainer">
<div class="left-element">
    <b>Última modificación</b>
    
    26 de agosto de 2024
    
</div>
<div class="right-element"><p>© Bamboo | All rights reserved <strong>2024</strong></p></div>
</div>
</div>
</div>


          </main>
        </div>
      </div>
      
    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>









<script src="../../../../js/main.min.cf0cf67aa0c4b9599b41d5b3a5b52ca9879eb3c73cf756863627b38a2052e9d7.js" integrity="sha256-zwz2eqDEuVmbQdWzpbUsqYees8c891aGNieziiBS6dc=" crossorigin="anonymous"></script>


<script src="../../../../js/scrollspy.js"></script>
<script src="../../../../js/scrolltotoc.js"></script>

  </body>
</html>