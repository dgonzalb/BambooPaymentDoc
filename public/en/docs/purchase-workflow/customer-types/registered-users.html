<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">


<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="shortcut icon" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" >
<link rel="apple-touch-icon" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" sizes="180x180">
<link rel="icon" type="image/png" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" sizes="36x36">
<link rel="icon" type="image/png" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" sizes="48x48">
<link rel="icon" type="image/png" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" sizes="72x72">
<link rel="icon" type="image/png" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" sizes="144x144">
<link rel="icon" type="image/png" href="https://bamboopaymentsystems.com/wp-content/uploads/2021/10/cropped-favicon-32x32.png" sizes="192x192">

<title>Recurring Use Token | Bamboo Payment</title><meta property="og:title" content="Recurring Use Token" />
<meta property="og:description" content="Despite the [Anonymous users]({{&lt; ref Anonymous-users.md&gt;}}), these users are registered on the website so that you can identify them, and their card information can be associated to perform other purchases without having to provide this information again.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/en/docs/purchase-workflow/customer-types/registered-users.html" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-07-17T07:28:16-05:00" />
<meta property="article:modified_time" content="2024-08-26T22:51:46-03:00" /><meta property="og:site_name" content="Bamboo Payment" />
<meta itemprop="name" content="Recurring Use Token">
<meta itemprop="description" content="Despite the [Anonymous users]({{&lt; ref Anonymous-users.md&gt;}}), these users are registered on the website so that you can identify them, and their card information can be associated to perform other purchases without having to provide this information again.
"><meta itemprop="datePublished" content="2023-07-17T07:28:16-05:00" />
<meta itemprop="dateModified" content="2024-08-26T22:51:46-03:00" />
<meta itemprop="wordCount" content="2264">
<meta itemprop="keywords" content="subtopic," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Recurring Use Token"/>
<meta name="twitter:description" content="Despite the [Anonymous users]({{&lt; ref Anonymous-users.md&gt;}}), these users are registered on the website so that you can identify them, and their card information can be associated to perform other purchases without having to provide this information again.
"/>

<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>



<link rel="preload" href="../../../../scss/main.min.54f18bd9c3365e27c9e6d4f3953b005937edf6642e486430333dae78147eb911.css" as="style">
<link href="../../../../scss/main.min.54f18bd9c3365e27c9e6d4f3953b005937edf6642e486430333dae78147eb911.css" rel="stylesheet" integrity="">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&amp;display=swap" rel="stylesheet">


<script defer language="javascript" type="text/javascript"  src="../../../../js/add-on.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>


  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="../../../../en/">
			
			
			<span class="navbar-logo"><img src="../../../../assets/BambooPayment.svg" style="height: 36px;"></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="../../../../en/docs.html" ><span class="active">Payins</span>
					<div class="content-bar-menu2"></div>
				</a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="../../../../en/payouts.html" ><span>Payouts</span>
					<div class="content-bar-menu2"></div>
				</a>
			</li>
			
			
			
			<li class="nav-item dropdown d-none d-lg-block">
				

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	<div class="content-bar-menu"></div>
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="../../../../es/docs/purchase-workflow/customer-types/registered-users.html">Español</a>
	
</div>
			</li>
			
		</ul>
	</div>
	
	
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="input-wrapper">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="Search …"
  aria-label="Search …"
  autocomplete="off"
  
  data-offline-search-index-json-src="../../../../offline-search-index.ba4e5780e2ee92d26423d0cb39c383107d9e31a81b4a5d9e4f8ffc0b2c0da54d17fcd73cad822f3c66926142fd1a05258a51ff2daa7e848f0b6a219a2846d8f3.json"
  data-offline-search-base-href="../../../../"
>

<svg
      xmlns="http://www.w3.org/2000/svg"
      class="input-icon"
      viewBox="0 0 20 20"
      fill="currentColor"
   >
      <path
         fill-rule="evenodd"
         d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
         clip-rule="evenodd"
      />
   </svg>

</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
      <img src="../../../../assets/burgermenu.png" height ="20" width="20" style="margin-left: 40px;"/>
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    <div class="nav-item dropdown d-block d-lg-none">
      

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	<div class="content-bar-menu"></div>
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="../../../../es/docs/purchase-workflow/customer-types/registered-users.html">Español</a>
	
</div>
    </div>
    
    








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs.html" href="../../../../en/docs.html" class="align-left pl-0 pr-2  td-sidebar-link td-sidebar-link__section ">Payins Integration Guide</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocshtml">
      
      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs/getting-started.html" href="../../../../en/docs/getting-started.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Getting started</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocsgetting-startedhtml">
      
      
      
      
      
      
        <a id="/en/docs/getting-started/concepts.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsgetting-startedconceptshtml" href="../../../../en/docs/getting-started/concepts.html">Concepts</a>
      
      
      
      
      
        <a id="/en/docs/getting-started/data-types.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsgetting-starteddata-typeshtml" href="../../../../en/docs/getting-started/data-types.html">Data Types</a>
      
      
      
      
      
        <a id="/en/docs/getting-started/payment-methods.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsgetting-startedpayment-methodshtml" href="../../../../en/docs/getting-started/payment-methods.html">Payment methods</a>
      
      
      
      
      
        <a id="/en/docs/getting-started/test-our-services.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsgetting-startedtest-our-serviceshtml" href="../../../../en/docs/getting-started/test-our-services.html">Test our services</a>
      
      
      
      
      
        <a id="/en/docs/getting-started/error-codes.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsgetting-startederror-codeshtml" href="../../../../en/docs/getting-started/error-codes.html">Error Codes</a>
      
      
      
      
      
        <a id="/en/docs/getting-started/change-log.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsgetting-startedchange-loghtml" href="../../../../en/docs/getting-started/change-log.html">Change Log</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs/purchase-workflow.html" href="../../../../en/docs/purchase-workflow.html" class="align-left pl-0 pr-2  td-sidebar-link td-sidebar-link__section ">Purchase API</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspurchase-workflowhtml">
      
      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/purchase-workflow/customer-types.html" href="../../../../en/docs/purchase-workflow/customer-types.html" class="align-left pl-0 pr-2 active  td-sidebar-link td-sidebar-link__page ">Tokenization</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspurchase-workflowcustomer-typeshtml">
      
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/customer-types/anonymous-users.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspurchase-workflowcustomer-typesanonymous-usershtml" href="../../../../en/docs/purchase-workflow/customer-types/anonymous-users.html">One-Time Token</a>
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/customer-types/registered-users.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  active sub-section-child-topic" id="m-endocspurchase-workflowcustomer-typesregistered-usershtml" href="../../../../en/docs/purchase-workflow/customer-types/registered-users.html">Recurring Use Token</a>
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/customer-types/direct-tokenization.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspurchase-workflowcustomer-typesdirect-tokenizationhtml" href="../../../../en/docs/purchase-workflow/customer-types/direct-tokenization.html">Direct Tokenization for PCI Merchants</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/purchase-workflow/purchases.html" href="../../../../en/docs/purchase-workflow/purchases.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Create a Purchase</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspurchase-workflowpurchaseshtml">
      
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/purchases/purchase-operations.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspurchase-workflowpurchasespurchase-operationshtml" href="../../../../en/docs/purchase-workflow/purchases/purchase-operations.html">Basic Operations</a>
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/purchases/redirect-purchase.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspurchase-workflowpurchasesredirect-purchasehtml" href="../../../../en/docs/purchase-workflow/purchases/redirect-purchase.html">Redirect purchases</a>
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/purchases/direct-purchase.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspurchase-workflowpurchasesdirect-purchasehtml" href="../../../../en/docs/purchase-workflow/purchases/direct-purchase.html">Direct Purchase for PCI Merchants</a>
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/purchases/purchase-preview.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspurchase-workflowpurchasespurchase-previewhtml" href="../../../../en/docs/purchase-workflow/purchases/purchase-preview.html">Purchase Preview</a>
      
      
    </li>
  </ul>
  

      
      
      
      
      
        <a id="/en/docs/purchase-workflow/refunds-and-voids.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  " id="m-endocspurchase-workflowrefunds-and-voidshtml" href="../../../../en/docs/purchase-workflow/refunds-and-voids.html">Refunds and voids</a>
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/antifraud.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  " id="m-endocspurchase-workflowantifraudhtml" href="../../../../en/docs/purchase-workflow/antifraud.html">Anti-fraud</a>
      
      
      
      
      
        <a id="/en/docs/purchase-workflow/notification-webhooks.html" style="  display: block !important; "  class="td-sidebar-link td-sidebar-link__page  " id="m-endocspurchase-workflownotification-webhookshtml" href="../../../../en/docs/purchase-workflow/notification-webhooks.html">Webhooks</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs/forms.html" href="../../../../en/docs/forms.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Forms</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocsformshtml">
      
      
      
      
      
      
        <a id="/en/docs/forms/checkout-form.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsformscheckout-formhtml" href="../../../../en/docs/forms/checkout-form.html">Checkout Form</a>
      
      
      
      
      
        <a id="/en/docs/forms/embedded-checkout-form.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsformsembedded-checkout-formhtml" href="../../../../en/docs/forms/embedded-checkout-form.html">Embedded Checkout Form</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs/merchant-balances.html" href="../../../../en/docs/merchant-balances.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">API for Account Balances</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocsmerchant-balanceshtml">
      
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs/reporting.html" href="../../../../en/docs/reporting.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">API for Reports</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocsreportinghtml">
      
      
      
      
      
      
        <a id="/en/docs/reporting/transactions-report.html" style=""  class="td-sidebar-link td-sidebar-link__page  " id="m-endocsreportingtransactions-reporthtml" href="../../../../en/docs/reporting/transactions-report.html">Transaction Report API</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs/payment-methods.html" href="../../../../en/docs/payment-methods.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Countries and payment methods</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodshtml">
      
      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/argentina.html" href="../../../../en/docs/payment-methods/argentina.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Argentina</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodsargentinahtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/argentina/ar-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsargentinaar-cardshtml" href="../../../../en/docs/payment-methods/argentina/ar-cards.html">Credit and Debit cards</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/argentina/ar-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsargentinaar-apmhtml" href="../../../../en/docs/payment-methods/argentina/ar-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/brazil.html" href="../../../../en/docs/payment-methods/brazil.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Brazil</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodsbrazilhtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/brazil/br-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsbrazilbr-cardshtml" href="../../../../en/docs/payment-methods/brazil/br-cards.html">Credit cards</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/brazil/br-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsbrazilbr-apmhtml" href="../../../../en/docs/payment-methods/brazil/br-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/central-america.html" href="../../../../en/docs/payment-methods/central-america.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Central America</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodscentral-americahtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/central-america/cam-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodscentral-americacam-apmhtml" href="../../../../en/docs/payment-methods/central-america/cam-apm.html">Cash</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/chile.html" href="../../../../en/docs/payment-methods/chile.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Chile</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodschilehtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/chile/cl-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodschilecl-cardshtml" href="../../../../en/docs/payment-methods/chile/cl-cards.html">Credit and Debit cards</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/chile/cl-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodschilecl-apmhtml" href="../../../../en/docs/payment-methods/chile/cl-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/colombia.html" href="../../../../en/docs/payment-methods/colombia.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Colombia</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodscolombiahtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/colombia/co-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodscolombiaco-cardshtml" href="../../../../en/docs/payment-methods/colombia/co-cards.html">Credit and Debit cards</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/colombia/co-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodscolombiaco-apmhtml" href="../../../../en/docs/payment-methods/colombia/co-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/ecuador.html" href="../../../../en/docs/payment-methods/ecuador.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Ecuador</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodsecuadorhtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/ecuador/ec-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsecuadorec-apmhtml" href="../../../../en/docs/payment-methods/ecuador/ec-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/mexico.html" href="../../../../en/docs/payment-methods/mexico.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Mexico</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodsmexicohtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/mexico/mx-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsmexicomx-cardshtml" href="../../../../en/docs/payment-methods/mexico/mx-cards.html">Credit and Debit cards</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/mexico/mx-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsmexicomx-apmhtml" href="../../../../en/docs/payment-methods/mexico/mx-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/paraguay.html" href="../../../../en/docs/payment-methods/paraguay.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Paraguay</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodsparaguayhtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/paraguay/py-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsparaguaypy-cardshtml" href="../../../../en/docs/payment-methods/paraguay/py-cards.html">Credit and Debit cards</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/paraguay/py-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsparaguaypy-apmhtml" href="../../../../en/docs/payment-methods/paraguay/py-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/peru.html" href="../../../../en/docs/payment-methods/peru.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Peru</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodsperuhtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/peru/pe-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsperupe-cardshtml" href="../../../../en/docs/payment-methods/peru/pe-cards.html">Credit and Debit cards</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/peru/pe-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsperupe-apmhtml" href="../../../../en/docs/payment-methods/peru/pe-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/payment-methods/uruguay.html" href="../../../../en/docs/payment-methods/uruguay.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">Uruguay</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspayment-methodsuruguayhtml">
      
      
      
      
      
      
        <a id="/en/docs/payment-methods/uruguay/uy-cards.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsuruguayuy-cardshtml" href="../../../../en/docs/payment-methods/uruguay/uy-cards.html">Credit and Debit cards</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/uruguay/uy-loyaltyplans.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsuruguayuy-loyaltyplanshtml" href="../../../../en/docs/payment-methods/uruguay/uy-loyaltyplans.html">Loyalty plans</a>
      
      
      
      
      
        <a id="/en/docs/payment-methods/uruguay/uy-apm.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspayment-methodsuruguayuy-apmhtml" href="../../../../en/docs/payment-methods/uruguay/uy-apm.html">Alternative Payment Methods</a>
      
      
    </li>
  </ul>
  

      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs/plugins.html" href="../../../../en/docs/plugins.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Plug-ins</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspluginshtml">
      
      
      
      
      









<li class=" td-sidebar-link td-sidebar-link__sub_section_title ">
    <a id="/en/docs/plugins/vtex.html" href="../../../../en/docs/plugins/vtex.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__page ">VTEX Connector</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocspluginsvtexhtml">
      
      
      
      
      
      
        <a id="/en/docs/plugins/vtex/_vtex_setup.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspluginsvtex_vtex_setuphtml" href="../../../../en/docs/plugins/vtex/_vtex_setup.html">Integration Guide</a>
      
      
      
      
      
        <a id="/en/docs/plugins/vtex/_vtex_payment_flow.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspluginsvtex_vtex_payment_flowhtml" href="../../../../en/docs/plugins/vtex/_vtex_payment_flow.html">Payment Flow</a>
      
      
      
      
      
        <a id="/en/docs/plugins/vtex/_vtex_admin.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocspluginsvtex_vtex_adminhtml" href="../../../../en/docs/plugins/vtex/_vtex_admin.html">Store Management</a>
      
      
    </li>
  </ul>
  

      
      
    </li>
  </ul>
   </ul> 

      
      
      
      








 <ul class="td-sidebar-nav__section pr-md-3"> 
<li class="  td-sidebar-nav__section-title ">
    <a id="/en/docs/versions.html" href="../../../../en/docs/versions.html" class="align-left pl-0 pr-2 collapsed  td-sidebar-link td-sidebar-link__section ">Next Versions</a>
  </li>
  <ul class="side-main">
    <li class="" id="endocsversionshtml">
      
      
      
      
      
      
        <a id="/en/docs/versions/purchase_v3.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocsversionspurchase_v3html" href="../../../../en/docs/versions/purchase_v3.html">Create a Purchase</a>
      
      
      
      
      
        <a id="/en/docs/versions/card_operations.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocsversionscard_operationshtml" href="../../../../en/docs/versions/card_operations.html">Capture and Cancel</a>
      
      
      
      
      
        <a id="/en/docs/versions/3d_secure.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocsversions3d_securehtml" href="../../../../en/docs/versions/3d_secure.html">3DS Pass-through</a>
      
      
      
      
      
        <a id="/en/docs/versions/network_tokens.html" style=""  class="td-sidebar-link td-sidebar-link__page  sub-section-child-topic" id="m-endocsversionsnetwork_tokenshtml" href="../../../../en/docs/versions/network_tokens.html">Network Tokens</a>
      
      
    </li>
  </ul>
   </ul> 

      
      
    </li>
  </ul>
   </ul> 

  </nav>
</div>


<script>
  $('.td-sidebar-nav').scrollTop(localStorage.getItem("currentPosition"))
  var currentPosition = 0;
  $(".td-sidebar-nav" ).scroll(function() {
    currentPosition = $('.td-sidebar-nav').scrollTop()
    localStorage.setItem("currentPosition",currentPosition);
  });
  
</script>


          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            









<p> </p>


<nav id="TableOfContents">
  <ul>
    <li><a href="#create-a-customer">Create a Customer</a>
      <ul>
        <li><a href="#request-parameters">Request parameters</a></li>
        <li><a href="#response-parameters">Response parameters</a></li>
        <li><a href="#customer-operations">Customer operations</a></li>
      </ul>
    </li>
    <li><a href="#capture-the-card-data">Capture the Card Data</a>
      <ul>
        <li><a href="#invoking-the-card-enrollment">Invoking the Card Enrollment</a></li>
        <li><a href="#using-direct-tokenization">Using Direct tokenization</a></li>
      </ul>
    </li>
    <li><a href="#create-a-basic-purchase">Create a Basic Purchase</a></li>
    <li><a href="#recurring-purchases-in-one-click">Recurring Purchases in One Click</a></li>
    <li><a href="#verification-code-request-flow">Verification Code Request Flow</a></li>
    <li><a href="#notification-alternative">Notification Alternative</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		













<li class="breadcrumb-item" >
	<a href="../../../../en/docs.html">Payins Integration Guide</a>
</li>




<li class="breadcrumb-item" >
	<a href="../../../../en/docs/purchase-workflow.html">Purchase API</a>
</li>




<li class="breadcrumb-item" >
	<a href="../../../../en/docs/purchase-workflow/customer-types.html">Tokenization</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="../../../../en/docs/purchase-workflow/customer-types/registered-users.html">Recurring Use Token</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Recurring Use Token</h1>
    <div class="lead">Despite the <a href="../../../../en/docs/purchase-workflow/customer-types/anonymous-users.html">Anonymous users</a>, these users are registered on the website so that you can identify them, and their card information can be associated to perform other purchases without having to provide this information again.</div>
	       
	<p>The customer will receive a <em>CommerceToken</em> after registering their card, which they can use for future transactions. Below are the steps to purchase as a registered user on the website.</p>
<h2 id="create-a-customer">Create a Customer</h2>
<p>The first step is to create the customer in Bamboo Payment. To do so, you must invoke a <strong>POST</strong> request to the following URLs according to your needs.</p>
<ul>
<li><strong>Production</strong>: <code>https://api.bamboopayment.com/v1/api/customer</code></li>
<li><strong>Stage</strong>: <code>https://api.stage.bamboopayment.com/v1/api/customer</code></li>
</ul>
<h3 id="request-parameters">Request parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th style="text-align:center">Mandatory?</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Email</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>Customer email address.</td>
</tr>
<tr>
<td><code>FirstName</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>Customer name.</td>
</tr>
<tr>
<td><code>LastName</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>Customer last name.</td>
</tr>
<tr>
<td><code>DocumentTypeId</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>Customer document type. Find the possible values in the Document types table according to the <a href="../../../../en/docs/payment-methods.html">country</a>.</td>
</tr>
<tr>
<td><code>DocNumber</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>Customer document Number.</td>
</tr>
<tr>
<td><code>Owner</code></td>
<td><code>string</code></td>
<td style="text-align:center">No</td>
<td>It determines whether the user is anonymous or if the merchant, or us, registered it.<br>The possible values are:<ul style="margin-bottom: initial;"><li><em>Our</em></li><li><em>Commerce</em>. This is the default value</li><li><em>Anonymous</em></li></ul></td>
</tr>
<tr>
<td><code>PhoneNumber</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>Customer contact telephone number.</td>
</tr>
<tr>
<td><code>BillingAddress</code></td>
<td><code>object</code></td>
<td style="text-align:center">Yes</td>
<td>This parameter is the customer&rsquo;s billing address.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>AddressID</code></td>
<td><code>integer</code></td>
<td style="text-align:center">Yes</td>
<td>Address Identifier.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>AddressType</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>Type of address.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>Country</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>Country of the address.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>State</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>State of the address.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>City</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>City of the address.</td>
</tr>
<tr>
<td><code>BillingAddress</code>→<code>AddressDetail</code></td>
<td><code>string</code></td>
<td style="text-align:center">Yes</td>
<td>This parameter corresponds to the Additional information of the address, such as street, number, etc.</td>
</tr>
</tbody>
</table>
<h4 id="request-example">Request example</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;kristeldyoder@teleworm.us&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;FirstName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Kristel&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;LastName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Yoder&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;DocNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;31130749&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;DocumentTypeId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commerce&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;PhoneNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;093000000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;BillingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;AddressType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Country&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Uruguay&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;State&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;City&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;AddressDetail&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;100&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="response-parameters">Response parameters</h3>
<p>The response object returns the recently created customer&rsquo;s information or the error that may have occurred. In the <code>Response.CustomerId</code>, you can find the customer id generated by the API to allow you to consult or update a customer.</p>
<p>Use the following parameters to perform extra operations over customers:</p>
<ul>
<li><code>CaptureURL</code>: Card data capture URL. Open this URL in an iframe to start capturing sensitive data. For more information, refer to <a href="#invoking-the-card-enrollment">Invoking the Card Enrollment</a>.</li>
<li><code>UniqueID</code>: Temporary unique identifier used to register external payment methods. Every time you request the Customer information, you get a new identifier. For more information, refer to <a href="#invoking-the-card-enrollment">Invoking the Card Enrollment</a>.</li>
<li><code>URL</code>: URL when you can consult the information of a client. For more information, refer to <a href="#get-a-customer">Get a Customer</a>.</li>
</ul>
<h4 id="response-example">Response example</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Response&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;CustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">249205</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Created&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2023-08-22T11:26:53.343&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;CommerceCustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commerce&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;kristeldyoder@teleworm.us&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Enabled&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;ShippingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;BillingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;AddressId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">373151</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;AddressType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Country&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Uruguay&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;State&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;AddressDetail&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;100&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;PostalCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;City&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Plans&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;AdditionalData&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;PaymentProfiles&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;CaptureURL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://api.stage.bamboopayment.com/Capture/&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;UniqueID&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UI_b53cb8db-771e-4622-a5db-0e58e156f192&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;URL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://api.stage.bamboopayment.com/api/Customer/249205&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;FirstName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Kristel&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;LastName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Yoder&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;DocNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;31130749&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;DocumentTypeId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;PhoneNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;093000000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;ExternalValue&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Errors&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="customer-operations">Customer operations</h3>
<p>Once you have created a user, you can perform operations to get or update a customer&rsquo;s information.</p>
<h4 id="get-a-customer">Get a customer</h4>
<p>You can get a customer&rsquo;s information using their Id or email address.</p>
<p>To do so, you must invoke a <strong>GET</strong> request to the following URLs according to your needs.</p>
<ul>
<li><strong>Production</strong>: <code>https://api.bamboopayment.com/v1/api/customer</code></li>
<li><strong>Stage</strong>: <code>https://api.stage.bamboopayment.com/v1/api/customer</code></li>
</ul>
<div id="shortTable"></div>
<table>
<thead>
<tr>
<th></th>
<th>Endpoint</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Get by <em>Customer Id</em></td>
<td><code>/{{customer-id}}</code></td>
<td></td>
</tr>
<tr>
<td>Get by <em>Customer email</em></td>
<td><code>/GetCustomerByEmail?email={{EmailAddress}}</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>In response, you will get a list with the same object returned when <a href="#response-example">creating a customer</a>. Example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Response&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;CustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">249205</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Created&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2023-08-22T14:26:53.343&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;CommerceCustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commerce&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;kristeldyoder@teleworm.us&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Enabled&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;ShippingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;BillingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;AddressId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">373151</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;AddressType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;Country&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Uruguay&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;State&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;AddressDetail&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;100&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;PostalCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;City&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;Plans&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;AdditionalData&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;PaymentProfiles&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;CaptureURL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://api.stage.bamboopayment.com/Capture/&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;UniqueID&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UI_61109a7f-5414-4424-8654-18c30060cd2b&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;URL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://api.stage.bamboopayment.com/api/Customer/249205&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;FirstName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Kristel&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;LastName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Yoder&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;DocNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;31130749&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;DocumentTypeId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;PhoneNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;093000000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;ExternalValue&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Errors&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="update-a-customer">Update a customer</h4>
<p>To update the information of a customer, you must invoke a <strong>POST</strong> request to the following URLs according to your needs.</p>
<ul>
<li><strong>Production</strong>: <code>https://api.bamboopayment.com/v1/api/customer/{{{{customer-id}}}}/update</code></li>
<li><strong>Stage</strong>: <code>https://api.stage.bamboopayment.com/v1/api/customer/{{customer-id}}/update</code></li>
</ul>
<p>Where <code>{{customer-id}}</code> is the id generated when you created the user. Include in the body, the <a href="#request-parameters">parameters</a> you want to update for the user.</p>
<p>As response, you will get the same object returned when <a href="#response-example">creating a customer</a>.</p>
<h2 id="capture-the-card-data">Capture the Card Data</h2>
<p>The next step is to get the token of the customer’s card. To do so, you can invoke the Card Enrollment or use <a href="../../../../en/docs/purchase-workflow/customer-types/direct-tokenization.html">Direct tokenization</a> if your commerce is PCI-compliant.</p>


<div class="alert alert-info" role="alert">
</i><h4 class="alert-heading"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-info" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-circle-info fa-fw decorative"><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z" class=""></path></svg>
    Info</h4>
<p class="alert-text">If you use the Alternative payment method identifier, you don&rsquo;t require this step and must include the <strong>PaymentMediaId</strong>.</p>
</div>

<h3 id="invoking-the-card-enrollment">Invoking the Card Enrollment</h3>
<p>The following sequence diagram explains the Card Enrollment flow.</p>
<p><img src="../../../../assets/CardEnrollmentFlow_en.png" alt="PrintScreen"></p>
<p><strong>API calls during flow:</strong></p>
<ul>
<li><strong>3</strong>  HTTP/GET (server to server): <code>{environment_api}/v1/api/customer/{customer-id}</code></li>
<li><strong>11</strong>  HTTP/GET (server to server): <code>{environment_api}/v1/api/customer/{customer-id}</code></li>
</ul>
<p>With the information obtained in the <a href="#create-a-customer">previous step</a>, you can invoke the <strong>OpenIframeCustom</strong> or <strong>OpenIframeCustomWithPaymentMediaOptions</strong> methods (see details below) from the JavaScript library <code>PWCheckout</code>, which will manage the card data capture.</p>
<h4 id="openiframecustom">OpenIframeCustom</h4>
<p>The <strong>OpenIframeCustom</strong> method receives two parameters:</p>
<ul>
<li><strong>URL:</strong> The URL specifies the iFrame window address where customers enter Card data.<br>The URL is created by concatenating the received data as follows: <code>{CaptureURL}?key={publicKey}&amp;session_id={UniqueID}</code> where <code>{CaptureURL}</code> represents the <a href="../../../../en/docs/getting-started/concepts.html#environment">base URL</a> + <code>/Capture</code>. For example <code>https://api.stage.bamboopayment.com/v1/Capture</code>.<br>You can found this information in the <code>CaptureURL</code> parameter in the <a href="#response-parameters">response</a>.</li>
<li><strong>UniqueID:</strong> an identifier to distinguish the data capture session.<br>You can found this information in the <code>UniqueID</code> parameter in the <a href="#response-parameters">response</a>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">script</span> <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">OpenIframeCustom</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">UniqueID</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/script&gt;</span>
</span></span></code></pre></div><h4 id="openiframecustomwithpaymentmediaoptions">OpenIframeCustomWithPaymentMediaOptions</h4>
<p>The <strong>OpenIframeCustomWithPaymentMediaOptions</strong> method receives four parameters:</p>
<ul>
<li><strong>URL:</strong> The same as <a href="#openiframecustom">OpenIframeCustom</a>.</li>
<li><strong>UniqueID:</strong> The same as <a href="#openiframecustom">OpenIframeCustom</a>.</li>
<li><strong>PaymentMediaid:</strong> Identifier of the Payment method. If set, the Card Capture Form will only accept cards of this Payment Media. <em>This parameter applies only to Uruguay</em>.</li>
<li><strong>BankId:</strong> <a href="../../../../en/docs/payment-methods/uruguay.html#issuer-banks-table">Bank identifier</a>. <em>This parameter applies only to Uruguay</em>.</li>
</ul>
<p>The Card Capture Form will only accept cards of the specified Payment Method and Bank if you set both parameters, but they are optional.</p>
<p>Call examples of the <strong>OpenIframeCustomWithPaymentMediaOptions</strong> method:</p>
<ol>
<li>Call with <code>PaymentMediaId</code> and <code>BankId</code> set:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">script</span> <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Iframe</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">OpenIframeCustomWithPaymentMediaOptions</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">UniqueID</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">paymentMediaId</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">bankId</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/script&gt;</span>
</span></span></code></pre></div><br>
<ol start="2">
<li>Call with <code>BankId</code> set and <code>PaymentMediaId</code> in null.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">script</span> <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Iframe</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">OpenIframeCustomWithPaymentMediaOptions</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">UniqueID</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/script&gt;</span>
</span></span></code></pre></div><br>
<p>The customer enters the card data and after confirming, the <strong>PWCheckout</strong> library receives the notification that the card was captured correctly.</p>
<p>The merchant page can subscribe to the <em>tokenCreated</em> event that will be triggered upon receiving notification that the card data was captured.</p>
<p>The page can also set the property <code>form_id</code> (using the SetProperties method) to indicate the identifier of a form on the page that will be controlled by the <strong>PWCheckout</strong> library. The library will submit the form once the card information has been captured.</p>
<p>In response to the notification received (by the JavaScript event or by the form submit), the merchant page must re-request the updated Customer information by making the following <code>HTTP/GET</code> call (server to server): <code>{environment_api}/v1/api/customer/{customer-id}</code>.</p>
<p>The returned <strong>Customer</strong> object contains the <em>PaymentProfiles</em> of the customer. These objects have information on the payment methods associated with the client, where in the <em>Token</em> field, <em>CommerceToken</em> generated represents the payment card.</p>
<p>Response example that includes a <strong>PaymentProfile</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Response&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;CustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">53479</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Created&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2021-04-06T16:08:43.767&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;CommerceCustomerId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commerce&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Email&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Email222222@mail.com&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Enabled&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;ShippingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;BillingAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;AddressId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">51615</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;AddressType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;Country&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UY&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;State&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Montevideo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;AddressDetail&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;PostalCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;City&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;MONTEVIDEO&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;Plans&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;AdditionalData&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;PaymentProfiles&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;PaymentProfileId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">55591</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;PaymentMediaId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Created&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2021-04-19T11:26:17.693&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;LastUpdate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Brand&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;MasterCard&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;CardOwner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;John Simpson&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Bin&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;IssuerBank&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Santander&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Installments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;CreditCard&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Token&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;OT__wZcNQkcZtnYWeHIgR2vgWUUliS3lR18E4jiYpVJ8SzQ_&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Expiration&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;202211&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Last4&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;0001&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;Enabled&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;CaptureURL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://testapi.BambooPayment.com/v1/Capture/&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;UniqueID&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UI_263b2dde-b151-4f09-b8bf-c65883d2cb3b&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;URL&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;https://testapi.BambooPayment.com/v1/api/Customer/53479&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;FirstName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;FistName 2222&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;LastName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;LastName 2222&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;DocNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;12345672&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;DocumentTypeId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;PhoneNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;24022330&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Errors&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="using-direct-tokenization">Using Direct tokenization</h3>
<p>Since the user is registered in your commerce, you must invoke the method to <a href="../../../../en/docs/purchase-workflow/customer-types/direct-tokenization.html#CT">create the token for registered users</a>.</p>


<div class="alert alert-warning" role="alert">
</i><h4 class="alert-heading"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-info" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-circle-info fa-fw decorative"><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z" class=""></path></svg>
    Note</h4>
<p class="alert-text">You should keep the information of the <em>CommerceToken</em> private because it represents a captured card that anyone can use for multiple transactions.</p>
</div>

<h2 id="create-a-basic-purchase">Create a Basic Purchase</h2>
<p>The token just obtained must be sent from the browser or the mobile app to the application server to create the purchase transaction.</p>
<p>From the server, invoke the <a href="../../../../en/docs/purchase-workflow/purchases/purchase-operations.html#create-a-purchase">Create a Purchase</a>, including the <code>Purchase</code> object with the token and other transaction data.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;TrxToken&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;CT_kYv0qTHckRiZ4wjCz5NguZRuwFLSIrQc4jiYpVJ8SzQ_&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Order&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;17030613595101621fb&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Amount&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">123456</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Currency&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;USD&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;Capture&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;TargetCountryISO&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;CL&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;PaymentMediaId&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">106</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><br>
<p>The <strong>PaymentMediaId</strong> and <strong>TrxToken</strong> fields are optional, but sending one is mandatory, depending on the flow you want to use.</p>
<ul>
<li>
<p><strong>PaymentMediaId</strong>: Alternative payment method identifier (transfer, cash, and processing that requires customer redirection). You can obtain this identifier by consulting the <a href="../../../../en/docs/payment-methods.html">Payment Methods by country</a> section.</p>
</li>
<li>
<p><strong>TrxToken</strong>: You can generate the token and transact by sending it in this field.</p>
</li>
</ul>
<h2 id="recurring-purchases-in-one-click">Recurring Purchases in One Click</h2>
<p>After customers register correctly, some cards allow certain transactions without needing a Verification Code (CVV), which allows a more agile user experience (payments in one click). In these cases, purchases can be sent directly without requesting more information from the customer, as explained in the previous point, <a href="#create-a-basic-purchase">Basic purchase</a>.</p>
<p>You must request the Verification Code every time for transactions where the card does not support this feature, as we cannot store it on our servers.</p>
<h2 id="verification-code-request-flow">Verification Code Request Flow</h2>
<p>For the Payment Cards that require the entry of the Verification Code in all transactions, we designed the following workflow:</p>
<p><img src="../../../../assets/VerificationCodeRequestFlow_en.png" alt="PrintScreen"></p>
<ol>
<li>
<p>The customer, identified correctly on the Commerce website, initiates the payment process of a purchase using a card previously registered and associated with their account.</p>
</li>
<li>
<p>The merchant page submits the data to the web server to prepare the information sent to Bamboo Payment.</p>
</li>
<li>
<p>The merchant’s Web Server sends the purchase through the BambooPayment API, identifying the <em>CommerceToken</em> as the Payment Method the customer selects.</p>
</li>
<li>
<p>We carry out a series of validations; in this case, we verify if the payment method chosen allows the execution of transactions without the Verification Code. The selected Payment method does not support this functionality in this flow, so the transaction can only be completed once the Card Verification Code has been obtained.</p>
</li>
<li>
<p>We return the <code>Purchase</code> object in <em>Pending</em> status as a response, indicating that some action is needed to complete the process. The <code>Purchase</code> object returned will also contain the <code>CommerceAction</code> object that describes the necessary steps to be performed by the merchant.</p>
</li>
</ol>
<p><img src="../../../../assets/CVVRequestFlow.png" alt="PrintScreen"></p>
<p>The merchant must store the pending purchase information (at least the <code>PurchaseId</code> for future validations) and process the <code>CommerceAction</code> information to determine the required action. Take into consideration the following properties in this scenario:</p>
<ul>
<li><strong>ActionReason</strong>: Will have the value <code>VERIFICATION_CODE_NEEDED</code> because the purchase requires this Verification Code.</li>
<li><strong>ActionType</strong>: This field will have the value <strong>2</strong> corresponding to the action <code>PWCapture</code>, a function of the javascript component <code>PWCheckout</code> that allows to process this type of actions.</li>
<li><strong>ActionURL</strong>: This field specifies the URL that you must send as parameter to the <code>PWCapture</code> method of the <code>PWCheckout</code> component.</li>
</ul>
<ol start="6">
<li>The merchant’s web page must show the Verification Code request form to the client using the <code>PWCapture</code> method as shown here:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PWCapture</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><br>
<p>Where the value of the <code>url</code> parameter corresponds to the <code>ActionURL</code> field of the received <code>CommerceAction</code> object.</p>
<ol start="7">
<li>The customer will see the iframe with the Capture Form, which in this case will be presented showing the masked card number (only the last four digits) and a text field for the entry of the Verification Code.</li>
</ol>
<p><img src="../../../../assets/CVVCaptureForm.png" alt="PrintScreen"></p>
<ol start="8">
<li>
<p>The customer enters the Verification Code of the card used to create the purchase.</p>
</li>
<li>
<p>The verification code the customer enters is sent directly to the Bamboo Payment servers, where it&rsquo;s used to create the authorization message.</p>
</li>
<li>
<p>Bamboo Payment sends the authorization message to the corresponding acquirer with the complete data.</p>
</li>
<li>
<p>Bamboo Payment processes the acquirer’s response and updates the purchase status according to this response.</p>
</li>
<li>
<p>Bamboo Payment generates a notification to the merchant, informing the <strong>Purchase</strong> object and its final status determined by the authorization process. The <strong>Purchase</strong> sent is the same previously answered in step 5, the merchant should validate the information received (at least the <code>PurchaseId</code> matches the expected one). This notification is sent to the <a href="../../../../en/docs/purchase-workflow/notification-webhooks.html"><strong>WebHook</strong> service</a> the merchant must implement to obtain the different notifications generated by Bamboo Payment.</p>
</li>
</ol>
<h2 id="notification-alternative">Notification Alternative</h2>
<p>In addition to the option to receive a notification from Bamboo Payment at the end of the purchase process (step 12 of the normal flow), an alternative flow can be executed to explicitly query the result of the purchase once it is detected that the pending process has finished (after step 5).</p>
<p><img src="../../../../assets/VerificationCodeRequestFlow2_en.png" alt="PrintScreen"></p>
<p>This flow uses the functionalities implemented in the <strong>PWCheckout</strong> JavaScript library to inform the completion of the pending purchase process.</p>
<p>The steps related to this flow are listed below and explained; the initial stages before 12 are the same as those previously described.</p>
<ol start="12">
<li>
<p>Once the pending process has finished, the <strong>PWCheckout</strong> library receives a notification of the status of the process.</p>
</li>
<li>
<p>The <strong>PWCheckout</strong> library triggers the <code>notificationReceived</code> event. The merchant must subscribe previously to the event through the <strong>Bind</strong> method in the following way:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#000;font-weight:bold">&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#000">PWCheckout</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Bind</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;notificationReceived&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">NotificationHandler</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><br>
<p>The merchant must implement the <strong>NotificationHandler</strong> function (the name is just an example), which will receive information about the final state of the process.</p>
<p>Example of the function for handling notifications:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/javascript&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">NotificationHandler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">notification</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">notification</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ProcessStatus</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic">//Process OK
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic">//Process with errors
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><br>
<p>The <code>ProcessStatus</code> field of the received notification will determine the final state of the process. The possible values are:</p>
<ul>
<li><strong>OK</strong> (value 1) – The process finished successfully.</li>
<li><strong>Pending</strong> (value 2) – The process is still pending.</li>
<li><strong>Error</strong> (value 3) – The process ended in error.</li>
</ul>
<ol start="14">
<li>
<p>After the web page receives the <code>notificationReceived</code> event, it may continue with the flow.</p>
</li>
<li>
<p>The merchant must invoke a GET call from the web server to the BambooPayment Purchase API, querying the <code>PurchaseId</code> previously stored in step 5.</p>
</li>
</ol>
<p>For this, the call is made: HTTP/GET (server to server):</p>
<p><code>{environment_api}/v1/api/purchase/{purchase-id} </code></p>
<ol start="16">
<li>The Bamboo Payment response will contain the <code>Purchase</code> object with a status other than <em>Pending</em> (depending on the result of the transaction), so it can be processed as a regular purchase response.</li>
</ol>
<p>For this, the call is made: HTTP/POST (server to server):</p>
<p><code>{environment_api}/v1/api/purchase</code></p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">
<img src="https://s3.us-east-1.amazonaws.com/gateway.prod.bamboopayment.com/doc-online/footer-barra.png" alt="footer" style="max-width: 100%;padding-bottom: 20px;">
<br>
<div class="footerContainer">
<div class="left-element">
    <b>Last modified</b>
    
    August 26, 2024
    
</div>
<div class="right-element"><p>© Bamboo | All rights reserved <strong>2024</strong></p></div>
</div>
</div>
</div>


          </main>
        </div>
      </div>
      
    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>









<script src="../../../../js/main.min.cf0cf67aa0c4b9599b41d5b3a5b52ca9879eb3c73cf756863627b38a2052e9d7.js" integrity="sha256-zwz2eqDEuVmbQdWzpbUsqYees8c891aGNieziiBS6dc=" crossorigin="anonymous"></script>


<script src="../../../../js/scrollspy.js"></script>
<script src="../../../../js/scrolltotoc.js"></script>

  </body>
</html>